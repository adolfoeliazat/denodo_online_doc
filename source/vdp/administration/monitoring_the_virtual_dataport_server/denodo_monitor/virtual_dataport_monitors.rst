=========================
Virtual DataPort Monitors
=========================

There are three monitors specific to Virtual DataPort servers:

-  **Virtual DataPort Queries Monitor**. It logs all the statements
   processed by Virtual DataPort. It is specific to Virtual DataPort and
   cannot be used to monitor other Denodo servers.

   The output is logged to ``denodo-monitor/logs/vdp-queries.log``.

   It collects information about regular queries (i.e. ``SELECT`` and
   ``CALL``) and DDL statements (i.e. ``CREATE TABLE``, ``CREATE VIEW``,
   ``DROP TABLE``, etc.), ``CREATE USER``, ``CONNECT``, ``CLOSE``, etc.

-  **Virtual DataPort Cache Monitor**. It logs the activity of the
   processes that load the Virtual DataPort cache.

   The output is logged to ``denodo-monitor/logs/vdp-loadcacheprocesses.log``.

-  **Virtual DataPort Connections Monitor**. It logs information about
   opened and closed connections, user account that opened/closed the
   connection, the interface it used (JDBC, ODBC, web service, etc.),
   from which IP, etc.

   The output is logged to ``denodo-monitor/logs/vdp-connections.log``.

-  **Virtual DataPort Data Sources Monitor**. Every number of seconds
   (determined by the ``interval`` property), it logs information about
   all the data sources of the Virtual DataPort server. In addition, it can
   ping periodically some data sources and register the result.

   The output is logged to ``denodo-monitor/logs/vdp-datasources.log``.

Logging Headers
===============

Every time the Denodo Monitor starts monitoring or has to acquire a new
connection to the server, the following header is included in the logs
generated by the Server and Virtual DataPort monitors:

.. code-block:: none

   Logging started at: 2017-02-03T15:29:17.411. Denodo Monitor 7.0 started at: 2017-02-03T15:29:16.925. VDP Server 6.0 update 20180112 started at: 2017-02-03T14:36:24.260

This header provides timestamp information about:

-  **Logging**. Instant when the monitor started logging. It is
   different among monitors due to their different polling intervals.
-  **Denodo Monitor**. Instant when the Denodo Monitor started monitoring. It is
   the same value for all the monitors.
-  **Virtual DataPort Server**. Instant when Virtual DataPort Server was
   launched.

When the logs contain several logging headers, you can detect important events
by comparing their values:

-  If Virtual DataPort Server start time changes, then Virtual DataPort Server
   was restarted.
-  If Denodo Monitor start time changes, then Denodo Monitor was restarted.
-  If both dates remain the same, then the connection with the server was lost.