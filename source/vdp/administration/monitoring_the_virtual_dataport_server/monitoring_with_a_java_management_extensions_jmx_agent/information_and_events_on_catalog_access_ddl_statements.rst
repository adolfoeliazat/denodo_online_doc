=========================================================
Information and Events on Catalog Access (DDL Statements)
=========================================================

The ``CatalogManagementInfo`` MBeans provide information about the Data
Definition Language (DDL) statements processed by the Server. These
MBeans are located in ``com.denodo.vdb.management.mbeans`` >
``CatalogManagementInfo`` > *database name*.

The MBeans of this type have one attribute: ``DatabaseName``, which
indicates the name of the database.

You can subscribe to these MBeans to receive a notification every time
one of the following events occurs:

-  The Server processes a statement that affects the metadata of the
   database (e.g., a new view is created, a view definition is modified,
   the privileges of a user are changed, etc.).
-  A transaction starts.
-  A transaction ends.

The following fields appear in each notification:


-  ``Timestamp``. Instant at which the notification of the statement is
   generated in the JMX server.


-  ``Type``. Type of the transaction: start of a transaction
   (``startTransaction``), end of a transaction (``endTransaction``) or
   execution of a DDL statement (``newEvent``).


-  ``UserData``. Compound element. Its subproperties depend on the type of
   notification:


   -  Statement executed:

      -  ``DatabaseName``: Name of the Virtual DataPort database on which the
         statement is run.
      -  ``EventID``: ID of the notification generated by Virtual DataPort.
      -  ``Time``: Instant at which the statement is executed.
      -  ``TransactionID``: ID of the transaction within which the statement
         is executed.
      -  ``Type``: Name of the executed operation.
      -  ``UserName``: ID of the user running the statement.
      -  ``VQLQuery``: VQL code for the statement.

   -  Transaction start:


      -  ``Autostarted``: Indicates whether the transaction has been
         explicitly started by the user.
      -  ``DatabaseName``: Name of the database on which the transaction is
         started.
      -  ``EventID``: ID of this notification.
      -  ``Time``: Instant at which the transaction starts.
      -  ``TransactionID``: ID assigned to the starting transaction.
      -  ``UserName``: ID of the user starting the transaction.

   -  Transaction end:
   
      -  ``DatabaseName``: Name of the database on which the transaction is
         run.
      -  ``EventID``: ID of this notification.
      -  ``Status``: Completion status of the transaction (``COMMIT`` or
         ``ROLLBACK``).
      -  ``Time``: Instant at which the transaction finished.
      -  ``TransactionID``: ID assigned to the ending transaction.
      -  ``UserName``: ID of the user running the transaction.



-  ``SeqNum``: Identifier of this notification.


-  ``Message``:

   -  If the execution of a statement is notified:
      ``Processed the <event eventId> in transaction <transactionId>``.
   -  If the start of a transaction is notified:
      ``Started the transaction <transactionId>``.
   -  If the end of a transaction is notified:
      ``Finished the transaction <transactionId>``.


-  Event: this value is

   .. code-block:: none
   
      javax.management.Notification[com.denodo.vdb.management.mbeans:type=CatalogManagementInfo,databaseName=<dbName>][type=<eventType>][message=<eventmessage>], 

   where ``<dbName>`` is the name of the Virtual DataPort database,
   ``<eventType>`` can be either ``startTransaction``, ``endTransaction``
   or ``newEvent`` and ``<eventmessage>`` takes the same value as in the
   ``Message`` property.


-  ``Source``: name of the MBean.

